---
layout: post
title:  "分布式系统 - 服务治理（四） - 降级 & 熔断"
date:   2017-08-15 23:56:00 +0800
---

降级和熔断，和限流一样，都可以说属于服务化中流量调控的范畴。主要目的都是一样的：防止大流量冲垮整个集群。

限流属于比较静态的流量调控，一般是配置完就不变，除非集群节点发生变化。而降级一般是运维 / 开发手动触发，熔断是无需配置，自动触发的。

降级和熔断，实现层面没什么好说，应该是比较简单的。说说要注意的点。

### 熔断

熔断模式（circuit breaker）可以参考电路熔断，如果一条线路电压过高，保险丝会熔断，防止火灾。放到我们的系统中，如果某个目标服务调用慢或者有大量超时，此时，熔断该服务的调用，对于后续调用请求，不在继续调用目标服务，直接返回，快速释放资源。如果目标服务情况好转则恢复调用。

#### 熔断是怎样触发的

熔断

#### 熔断发生在哪

熔断的核心思路是，当服务集群表现不正常的时候，快速失败，保护正常流量。所以这时，流量不应该到服务提供方，直接在请求方做熔断。

#### 熔断的粒度

#### 熔断策略

业务异常不能触发熔断

#### half-open

### 降级



### 参考

- http://www.infoq.com/cn/articles/micro-service-reliability-design
- http://www.infoq.com/cn/articles/architecture-optimization-and-design-the-architect-must-know
